{"ast":null,"code":"import React,{useContext}from'react';import{CartContext}from'../Context';import{useDispatch,useSelector}from'react-redux';import{selectIsAuth}from'../../redux/slices/auth';import{useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartItem=_ref=>{let{onRemove}=_ref;const{processedItems,onAddToCart,onRemoveItem}=useContext(CartContext);const isAuth=useSelector(selectIsAuth);// Проверяем авторизацию через redux\nconst navigate=useNavigate();const handleBuyClick=()=>{if(!isAuth){navigate('/login');// Перенаправляем на страницу авторизации\n}else{navigate('/checkout');// Перенаправляем на страницу подтверждения оплаты\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"cart\",children:processedItems.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"cart-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"precart\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0410\"}),/*#__PURE__*/_jsx(\"a\",{onClick:()=>onRemove('all'),children:\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C \\u0432\\u0441\\u044E \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"items\",children:processedItems.map(obj=>/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem\",children:[/*#__PURE__*/_jsx(Link,{to:`/tovar/${encodeURIComponent(obj.title)}`,children:/*#__PURE__*/_jsx(\"div\",{className:\"cartItemImg\",children:/*#__PURE__*/_jsx(\"img\",{src:obj.imageUrl,alt:obj.title,width:50,height:50})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"descrip\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"category\",children:obj.category}),/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:obj.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"number\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"minus\",onClick:()=>obj.quantity>1?onRemoveItem(obj.id):onRemove(obj.id),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"counter\",children:obj.quantity||1}),/*#__PURE__*/_jsx(\"button\",{className:\"plus\",onClick:()=>onAddToCart(obj),children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[(obj.price*(obj.quantity||1)).toLocaleString('ru-RU'),\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemove(obj.id),className:\"trashImg\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/products/TrashCan.svg\",alt:\"Remove\"})})]})]},obj.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"total-menu\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-total\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0412\\u0410\\u0428 \\u0417\\u0410\\u041A\\u0410\\u0417\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket-row-total\",children:[/*#__PURE__*/_jsxs(\"a\",{children:[processedItems.reduce((sum,item)=>sum+(item.quantity||1),0),\" \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"]}),/*#__PURE__*/_jsxs(\"a\",{children:[processedItems.reduce((sum,item)=>sum+item.price*(item.quantity||1),0).toLocaleString('ru-RU'),\" \",\"\\u0440.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket-row-final\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\"}),/*#__PURE__*/_jsxs(\"b\",{children:[processedItems.reduce((sum,item)=>sum+item.price*(item.quantity||1),0).toLocaleString('ru-RU'),\" \",\"\\u0440.\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"buy\",onClick:handleBuyClick,children:\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"aftertitle\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0441\\u0430\\u043C\\u043E\\u0432\\u044B\\u0432\\u043E\\u0437!\"})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"cartEmpty\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"precart2\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u041A\\u041E\\u0420\\u0417\\u0418\\u041D\\u0410\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435 \\u043F\\u043E\\u043D\\u0440\\u0430\\u0432\\u0438\\u0432\\u0448\\u0438\\u0435\\u0441\\u044F \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \\u0438 \\u043D\\u0430\\u0441\\u043B\\u0430\\u0436\\u0434\\u0430\\u0439\\u0442\\u0435\\u0441\\u044C \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430\\u043C\\u0438\\uFE0F\"}),/*#__PURE__*/_jsx(Link,{to:\"/catalog\",children:/*#__PURE__*/_jsx(\"button\",{className:\"toCatalog\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/pic/toCatalog.svg\",alt:\"To Catalog\"})})})]})]})})});};export default CartItem;","map":{"version":3,"names":["React","useContext","CartContext","useDispatch","useSelector","selectIsAuth","useNavigate","Link","axios","jsx","_jsx","jsxs","_jsxs","CartItem","_ref","onRemove","processedItems","onAddToCart","onRemoveItem","isAuth","navigate","handleBuyClick","className","children","length","onClick","map","obj","to","encodeURIComponent","title","src","imageUrl","alt","width","height","category","quantity","id","price","toLocaleString","reduce","sum","item"],"sources":["C:/Users/lakir/Desktop/lastTry/frontend/src/components/cartItem/CartItem.jsx"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport { CartContext } from '../Context';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectIsAuth } from '../../redux/slices/auth';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst CartItem = ({ onRemove }) => {\r\n  const { processedItems, onAddToCart, onRemoveItem } = useContext(CartContext);\r\n  const isAuth = useSelector(selectIsAuth); // Проверяем авторизацию через redux\r\n  const navigate = useNavigate();\r\n\r\n  const handleBuyClick = () => {\r\n    if (!isAuth) {\r\n      navigate('/login'); // Перенаправляем на страницу авторизации\r\n    } else {\r\n      navigate('/checkout'); // Перенаправляем на страницу подтверждения оплаты\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"cart\">\r\n        {processedItems.length > 0 ? (\r\n          <div className=\"cart-main\">\r\n            <div className=\"precart\">\r\n              <span>КОРЗИНА</span>\r\n              <a onClick={() => onRemove('all')}>Очистить всю корзину</a>\r\n            </div>\r\n            <div className=\"items\">\r\n              {processedItems.map((obj) => (\r\n                <div className=\"cartItem\" key={obj.id}>\r\n                   <Link to={`/tovar/${encodeURIComponent(obj.title)}`}>\r\n                  <div className=\"cartItemImg\">\r\n                    <img src={obj.imageUrl} alt={obj.title} width={50} height={50} />\r\n                  </div></Link>\r\n                  <div className=\"main\">\r\n                    <div className=\"descrip\">\r\n                      <div className=\"category\">{obj.category}</div>\r\n                      <div className=\"name\">{obj.title}</div>\r\n                    </div>\r\n                    <div className=\"number\">\r\n                      <button\r\n                        className=\"minus\"\r\n                        onClick={() => (obj.quantity > 1 ? onRemoveItem(obj.id) : onRemove(obj.id))}\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <span className=\"counter\">{obj.quantity || 1}</span>\r\n                      <button className=\"plus\" onClick={() => onAddToCart(obj)}>\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"price\">{(obj.price * (obj.quantity || 1)).toLocaleString('ru-RU')} руб.</div>\r\n                    <button onClick={() => onRemove(obj.id)} className=\"trashImg\">\r\n                      <img src=\"img/products/TrashCan.svg\" alt=\"Remove\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"order-block\">\r\n              <div className=\"total-menu\">\r\n                <div className=\"main-total\">\r\n                  <div className=\"subtitle\">\r\n                    <span>ВАШ ЗАКАЗ</span>\r\n                  </div>\r\n                  <div className=\"basket-row-total\">\r\n                    <a>{processedItems.reduce((sum, item) => sum + (item.quantity || 1), 0)} товаров</a>\r\n                    <a>\r\n                      {processedItems\r\n                        .reduce((sum, item) => sum + item.price * (item.quantity || 1), 0)\r\n                        .toLocaleString('ru-RU')}{\" \"}\r\n                      р.\r\n                    </a>\r\n                  </div>\r\n                  <div className=\"basket-row-final\">\r\n                    <b>Итого</b>\r\n                    <b>\r\n                      {processedItems\r\n                        .reduce((sum, item) => sum + item.price * (item.quantity || 1), 0)\r\n                        .toLocaleString('ru-RU')}{\" \"}\r\n                      р.\r\n                    </b>\r\n                  </div>\r\n                  <button className=\"buy\" onClick={handleBuyClick}>\r\n                    Купить\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"aftertitle\">\r\n                <span>Только самовывоз!</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"cartEmpty\">\r\n            <div className=\"precart2\">\r\n              <span>КОРЗИНА</span>\r\n            </div>\r\n            <div className=\"center\">\r\n              <h1>В корзине пока нет товаров</h1>\r\n              <p>Добавляйте понравившиеся товары и наслаждайтесь покупками️</p>\r\n              <Link to=\"/catalog\">\r\n                <button className=\"toCatalog\">\r\n                  <img src=\"img/pic/toCatalog.svg\" alt=\"To Catalog\" />\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,WAAW,KAAQ,YAAY,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,YAAY,KAAQ,yBAAyB,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC5B,KAAM,CAAEE,cAAc,CAAEC,WAAW,CAAEC,YAAa,CAAC,CAAGjB,UAAU,CAACC,WAAW,CAAC,CAC7E,KAAM,CAAAiB,MAAM,CAAGf,WAAW,CAACC,YAAY,CAAC,CAAE;AAC1C,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAe,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAACF,MAAM,CAAE,CACXC,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACtB,CAAC,IAAM,CACLA,QAAQ,CAAC,WAAW,CAAC,CAAE;AACzB,CACF,CAAC,CAED,mBACEV,IAAA,QAAKY,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBb,IAAA,QAAKY,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClBP,cAAc,CAACQ,MAAM,CAAG,CAAC,cACxBZ,KAAA,QAAKU,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBX,KAAA,QAAKU,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBb,IAAA,SAAAa,QAAA,CAAM,4CAAO,CAAM,CAAC,cACpBb,IAAA,MAAGe,OAAO,CAAEA,CAAA,GAAMV,QAAQ,CAAC,KAAK,CAAE,CAAAQ,QAAA,CAAC,gHAAoB,CAAG,CAAC,EACxD,CAAC,cACNb,IAAA,QAAKY,SAAS,CAAC,OAAO,CAAAC,QAAA,CACnBP,cAAc,CAACU,GAAG,CAAEC,GAAG,eACtBf,KAAA,QAAKU,SAAS,CAAC,UAAU,CAAAC,QAAA,eACtBb,IAAA,CAACH,IAAI,EAACqB,EAAE,CAAE,UAAUC,kBAAkB,CAACF,GAAG,CAACG,KAAK,CAAC,EAAG,CAAAP,QAAA,cACrDb,IAAA,QAAKY,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1Bb,IAAA,QAAKqB,GAAG,CAAEJ,GAAG,CAACK,QAAS,CAACC,GAAG,CAAEN,GAAG,CAACG,KAAM,CAACI,KAAK,CAAE,EAAG,CAACC,MAAM,CAAE,EAAG,CAAE,CAAC,CAC9D,CAAC,CAAM,CAAC,cACbvB,KAAA,QAAKU,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBX,KAAA,QAAKU,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBb,IAAA,QAAKY,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAEI,GAAG,CAACS,QAAQ,CAAM,CAAC,cAC9C1B,IAAA,QAAKY,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEI,GAAG,CAACG,KAAK,CAAM,CAAC,EACpC,CAAC,cACNlB,KAAA,QAAKU,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBb,IAAA,WACEY,SAAS,CAAC,OAAO,CACjBG,OAAO,CAAEA,CAAA,GAAOE,GAAG,CAACU,QAAQ,CAAG,CAAC,CAAGnB,YAAY,CAACS,GAAG,CAACW,EAAE,CAAC,CAAGvB,QAAQ,CAACY,GAAG,CAACW,EAAE,CAAG,CAAAf,QAAA,CAC7E,GAED,CAAQ,CAAC,cACTb,IAAA,SAAMY,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEI,GAAG,CAACU,QAAQ,EAAI,CAAC,CAAO,CAAC,cACpD3B,IAAA,WAAQY,SAAS,CAAC,MAAM,CAACG,OAAO,CAAEA,CAAA,GAAMR,WAAW,CAACU,GAAG,CAAE,CAAAJ,QAAA,CAAC,GAE1D,CAAQ,CAAC,EACN,CAAC,cACNX,KAAA,QAAKU,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAE,CAACI,GAAG,CAACY,KAAK,EAAIZ,GAAG,CAACU,QAAQ,EAAI,CAAC,CAAC,EAAEG,cAAc,CAAC,OAAO,CAAC,CAAC,sBAAK,EAAK,CAAC,cAC7F9B,IAAA,WAAQe,OAAO,CAAEA,CAAA,GAAMV,QAAQ,CAACY,GAAG,CAACW,EAAE,CAAE,CAAChB,SAAS,CAAC,UAAU,CAAAC,QAAA,cAC3Db,IAAA,QAAKqB,GAAG,CAAC,2BAA2B,CAACE,GAAG,CAAC,QAAQ,CAAE,CAAC,CAC9C,CAAC,EACN,CAAC,GA1BuBN,GAAG,CAACW,EA2B9B,CACN,CAAC,CACC,CAAC,cACN1B,KAAA,QAAKU,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1Bb,IAAA,QAAKY,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBX,KAAA,QAAKU,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBb,IAAA,QAAKY,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvBb,IAAA,SAAAa,QAAA,CAAM,mDAAS,CAAM,CAAC,CACnB,CAAC,cACNX,KAAA,QAAKU,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BX,KAAA,MAAAW,QAAA,EAAIP,cAAc,CAACyB,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,EAAIC,IAAI,CAACN,QAAQ,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,6CAAQ,EAAG,CAAC,cACpFzB,KAAA,MAAAW,QAAA,EACGP,cAAc,CACZyB,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,CAAGC,IAAI,CAACJ,KAAK,EAAII,IAAI,CAACN,QAAQ,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CACjEG,cAAc,CAAC,OAAO,CAAC,CAAE,GAAG,CAAC,SAElC,EAAG,CAAC,EACD,CAAC,cACN5B,KAAA,QAAKU,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/Bb,IAAA,MAAAa,QAAA,CAAG,gCAAK,CAAG,CAAC,cACZX,KAAA,MAAAW,QAAA,EACGP,cAAc,CACZyB,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,CAAGC,IAAI,CAACJ,KAAK,EAAII,IAAI,CAACN,QAAQ,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CACjEG,cAAc,CAAC,OAAO,CAAC,CAAE,GAAG,CAAC,SAElC,EAAG,CAAC,EACD,CAAC,cACN9B,IAAA,WAAQY,SAAS,CAAC,KAAK,CAACG,OAAO,CAAEJ,cAAe,CAAAE,QAAA,CAAC,sCAEjD,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,cACNb,IAAA,QAAKY,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzBb,IAAA,SAAAa,QAAA,CAAM,8FAAiB,CAAM,CAAC,CAC3B,CAAC,EACH,CAAC,EACH,CAAC,cAENX,KAAA,QAAKU,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBb,IAAA,QAAKY,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvBb,IAAA,SAAAa,QAAA,CAAM,4CAAO,CAAM,CAAC,CACjB,CAAC,cACNX,KAAA,QAAKU,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBb,IAAA,OAAAa,QAAA,CAAI,0IAA0B,CAAI,CAAC,cACnCb,IAAA,MAAAa,QAAA,CAAG,qUAA0D,CAAG,CAAC,cACjEb,IAAA,CAACH,IAAI,EAACqB,EAAE,CAAC,UAAU,CAAAL,QAAA,cACjBb,IAAA,WAAQY,SAAS,CAAC,WAAW,CAAAC,QAAA,cAC3Bb,IAAA,QAAKqB,GAAG,CAAC,uBAAuB,CAACE,GAAG,CAAC,YAAY,CAAE,CAAC,CAC9C,CAAC,CACL,CAAC,EACJ,CAAC,EACH,CACN,CACE,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAApB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}